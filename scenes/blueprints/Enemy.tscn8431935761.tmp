[gd_scene load_steps=6 format=3 uid="uid://c2g0w7x11p6pf"]

[ext_resource type="PackedScene" uid="uid://doqcv26m4ebdm" path="res://scenes/blueprints/Entity.tscn" id="1_hkbp5"]
[ext_resource type="Script" uid="uid://dwg18n0f1qyct" path="res://scripts/Enemy.gd" id="2_8nhdp"]

[sub_resource type="CircleShape2D" id="CircleShape2D_8nhdp"]
radius = 74.3303

[sub_resource type="CircleShape2D" id="CircleShape2D_hkbp5"]
radius = 30.0167

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_hkbp5"]
radius = 7.0
height = 26.0

[node name="Enemy" instance=ExtResource("1_hkbp5")]
script = ExtResource("2_8nhdp")

[node name="CollisionShape" parent="." index="1"]
light_mask = 4
visibility_layer = 15
position = Vector2(0, 5)

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="." index="2"]
path_desired_distance = 3.0
target_desired_distance = 1.0
path_max_distance = 10.0
navigation_layers = 3
path_postprocessing = 1
simplify_path = true

[node name="Timer" type="Timer" parent="." index="3"]
wait_time = 0.1
autostart = true

[node name="OuterDetectionArea" type="Area2D" parent="." index="4"]

[node name="CollisionShape2D2" type="CollisionShape2D" parent="OuterDetectionArea" index="0"]
light_mask = 0
visibility_layer = 3
shape = SubResource("CircleShape2D_8nhdp")

[node name="InnerDetectionArea" type="Area2D" parent="." index="5"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="InnerDetectionArea" index="0"]
light_mask = 0
visibility_layer = 3
shape = SubResource("CircleShape2D_hkbp5")

[node name="RayCast2D" type="RayCast2D" parent="." index="6"]
target_position = Vector2(0, 100)
collision_mask = 3

[node name="HurtBox" type="Area2D" parent="." index="7"]
position = Vector2(15, 1)
collision_layer = 4
collision_mask = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="HurtBox" index="0"]
light_mask = 4
visibility_layer = 8
position = Vector2(-15, 3)
shape = SubResource("CapsuleShape2D_hkbp5")

[node name="TimerInvisibilityFrames" type="Timer" parent="." index="8"]
wait_time = 0.5

[node name="HealthBar" type="ProgressBar" parent="." index="9"]
offset_left = -11.0
offset_top = -12.0
offset_right = -7.0
offset_bottom = 15.0
scale = Vector2(5.21984, 0.100678)
rounded = true
show_percentage = false

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="body_exited" from="OuterDetectionArea" to="." method="_on_outer_detection_area_body_exited"]
[connection signal="body_entered" from="InnerDetectionArea" to="." method="_on_inner_detection_area_body_entered"]
[connection signal="area_entered" from="HurtBox" to="." method="_on_hurt_box_area_entered"]
[connection signal="timeout" from="TimerInvisibilityFrames" to="." method="_on_timer_invisibility_frames_timeout"]
